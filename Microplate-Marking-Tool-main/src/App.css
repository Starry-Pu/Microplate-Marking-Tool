/* =========================================
   1. Âü∫Á°ÄËÆæÁΩÆ
   ========================================= */
:root { font-family: Inter, system-ui, sans-serif; }
#root { width: 100%; height: 100%; margin: 0; padding: 0; }
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background-color: #f3f4f6; height: 100vh; width: 100vw; overflow: hidden; }

.app-container { display: flex; flex-direction: column; height: 100vh; width: 100%; }

/* Header & Toolbar */
.header { background: white; padding: 0 24px; height: 60px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #e5e7eb; flex-shrink: 0; }
.header h1 { font-size: 16px; font-weight: 600; color: #1f2937; }
.header-actions { display: flex; align-items: center; gap: 15px; }
.checkbox-label { display: flex; align-items: center; gap: 6px; font-size: 14px; color: #4b5563; cursor: pointer; user-select: none; }
.checkbox-label input { width: 16px; height: 16px; cursor: pointer; accent-color: #3b82f6; }
.btn { padding: 8px 16px; border-radius: 6px; font-size: 14px; cursor: pointer; border: none; font-weight: 500; transition: all 0.2s; }
.btn-primary { background: #3b82f6; color: white; }
.btn-primary:hover { background: #2563eb; }
.btn-outline { background: white; border: 1px solid #d1d5db; color: #374151; }
.btn-danger-outline { background: white; border: 1px solid #fecaca; color: #ef4444; }

.toolbar { padding: 0 0 20px 0; display: flex; justify-content: center; gap: 10px; flex-shrink: 0; width: 100%; background: transparent; border-bottom: none; }
.seg-btn { padding: 6px 18px; border: 1px solid #d1d5db; background: white; cursor: pointer; }
.seg-btn:first-child { border-radius: 6px 0 0 6px; }
.seg-btn:last-child { border-radius: 0 6px 6px 0; }
.seg-btn.active { background: #eff6ff; color: #3b82f6; border-color: #3b82f6; font-weight: bold; z-index: 1; }

/* Main Area */
.main-area { flex: 1; display: flex; overflow: hidden; background: #f9fafb; }
.canvas-wrapper { flex: 1; padding: 40px; overflow: auto; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; }

/* =========================================
   2. üåü ‰∏•Ê†ºÊãüÁúüÂ≠îÊùøÊ†∑Âºè
   ========================================= */
.plate-card {
  background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  display: flex; flex-direction: column; align-items: center; gap: 15px; width: fit-content;
}
.plate-header-info { text-align: center; color: #374151; font-weight: 500; width: 100%; border-bottom: 1px solid #f3f4f6; padding-bottom: 10px;}

.plate-outer-shell { padding: 5px; border: 2px solid #000; background: #fff; display: flex; flex-direction: column; width: 500px; }
.plate-col-labels { display: grid; width: 100%; padding-left: 20px; }
.plate-body-flex { display: flex; align-items: stretch; width: 100%; }
.plate-row-labels { display: flex; flex-direction: column; width: 20px; flex-shrink: 0; }
.label-cell { display: flex; justify-content: center; align-items: center; font-weight: bold; font-family: Arial, sans-serif; color: #000; font-size: 10px; }
.plate-col-labels .label-cell { width: 100%; padding-bottom: 2px; }
.plate-row-labels .label-cell { flex: 1; padding-right: 2px; }

/* ÁΩëÊ†ºÂÆπÂô® */
.plate-grid-container {
  display: grid; 
  flex: 1; 
  aspect-ratio: 3 / 2; 
  gap: 2px; 
  background: #fff; 
  border: none; 
  padding: 2px; 
}

/* Â≠î‰ΩçÊ†∑Âºè */
.well {
  height: 96%; 
  width: auto;
  aspect-ratio: 1 / 1; 
  max-width: 100%;
  max-height: 100%;
  margin: auto; 
  justify-self: center;
  align-self: center;
  
  display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.1s;

  border: 1px solid #333; 
  background-color: #000;
  border-radius: 50% !important; 
}

.well:hover { border-color: #fff; border-width: 2px; z-index: 2; }
.well.temp-selected { border: 2px solid #3b82f6 !important; background-color: #dbeafe !important; }

.well-text { 
  font-size: 10px; 
  font-weight: bold; 
  pointer-events: none; 
  user-select: none; 
  color: #fff; 
  opacity: 0.8; 
}
.temp-selected .well-text { color: #000; opacity: 1; } 

/* 96Â≠î ÂæÆË∞É */
.plate-grid-container[style*="repeat(12"] .well-text { font-size: 7px; }
.plate-grid-container[style*="repeat(12"] { gap: 1px; padding: 1px; }

/* =========================================
   3. Âõæ‰æã & ‰æßËæπÊ†è
   ========================================= */
.plate-legend-wrapper { margin-top: 15px; width: 100%; border-top: 1px dashed #e5e7eb; padding-top: 15px; }
.legend-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; width: 100%; }

/* üî• Êñ∞Â¢ûÔºöÂõæ‰æãÈ°πÂèØÁÇπÂáªÊ†∑Âºè */
.legend-item { 
  display: flex; align-items: center; justify-content: space-between; 
  padding: 4px 8px; background: #fff; border: 1px solid #e5e7eb; border-radius: 4px; 
  cursor: pointer; /* ÂèòÂ∞èÊâã */
  transition: all 0.2s; 
}
.legend-item:hover { 
  background-color: #f9fafb; 
  border-color: #b0b0b0; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.legend-left { display: flex; align-items: center; gap: 6px; overflow: hidden; }
.legend-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.legend-label { font-size: 11px; font-weight: 500; color: #374151; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 60px; }
.legend-count { font-size: 10px; color: #6b7280; background: #f3f4f6; padding: 1px 4px; border-radius: 3px; flex-shrink: 0; font-family: monospace; }

.side-panel { width: 260px; background: white; border-left: 1px solid #e5e7eb; display: flex; flex-direction: column; z-index: 20; }
.panel-header { padding: 15px; border-bottom: 1px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center; }
.panel-header h3 { font-size: 15px; color: #1f2937; }
.badge { background: #f3f4f6; padding: 2px 6px; border-radius: 8px; font-size: 11px; color: #6b7280; font-weight: 600; }
.stats-container { flex: 1; padding: 15px; overflow-y: auto; }
.empty-state { text-align: center; color: #9ca3af; margin-top: 30px; font-size: 13px; }
.stats-list-vertical { display: flex; flex-direction: column; gap: 8px; }

/* üî• Êñ∞Â¢ûÔºöÁªüËÆ°ÂàóË°®Ë°åÂèØÁÇπÂáªÊ†∑Âºè */
.stat-row { 
  display: flex; align-items: center; justify-content: space-between; 
  padding: 10px; background: #fff; border: 1px solid #f3f4f6; border-radius: 6px; 
  cursor: pointer; /* ÂèòÂ∞èÊâã */
  transition: all 0.2s; 
}
.stat-row:hover { 
  background-color: #f0f9ff; 
  border-color: #3b82f6; 
  transform: translateX(4px); 
}

.stat-info { display: flex; align-items: center; gap: 8px; }
.stat-color-dot { width: 10px; height: 10px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.1); }
.stat-name { font-size: 13px; font-weight: 500; color: #374151; }
.stat-count { font-size: 12px; color: #6b7280; font-family: monospace; background: #f3f4f6; padding: 1px 5px; border-radius: 4px; }
.panel-footer { padding: 15px; border-top: 1px solid #f3f4f6; background: #fafafa; }
.btn-block { width: 100%; display: block; }

.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.modal-content { background: white; padding: 20px; border-radius: 12px; width: 300px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
.modal-content h3 { margin-bottom: 8px; font-size: 16px; color: #111827; }
.modal-desc { font-size: 12px; color: #6b7280; margin-bottom: 15px; }
.form-group { margin-bottom: 12px; }
.form-group label { display: block; font-size: 12px; font-weight: 500; color: #374151; margin-bottom: 4px; }
.form-group input { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; outline: none; font-size: 13px; }
.form-group input:focus { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
.color-palette { display: flex; gap: 6px; flex-wrap: wrap; }
.color-dot { width: 24px; height: 24px; border-radius: 50%; cursor: pointer; border: 2px solid white; box-shadow: 0 0 0 1px #e5e7eb; }
.color-dot.active { box-shadow: 0 0 0 2px #1f2937; transform: scale(1.15); }
.modal-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 20px; }